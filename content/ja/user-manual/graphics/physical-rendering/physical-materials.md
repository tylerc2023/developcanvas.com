---
title: 物理的マテリアル
template: usermanual-page.tmpl.html
position: 2
---

物理ベースのレンダリングをPlayCanvasで使うためには、物理的マテリアルをどのように設定するか、そして様々なプロパティを変更することによってどのような効果があるかを理解する必要があります。

このセクションでは、マテリアルに設定できる効果的なプロパティについて説明します。また、プロパティを変更する事によってどのような影響があるかを、実際に動作するデモで確認します。

ではまず最初に、キューブマップとワークフローについて説明します。

## キューブマップ

多くの人はまず最初にエディタでマテリアルを作成した時、なぜ下のサンプルのように見えないのか困惑すると思いますので、まず最初にキューブマップとスカイボックスについて説明します。

**物理的マテリアルをきれいに表示するには、キューブマップが必要です** キューブマップはマテリアルの反射光成分の大きな割合を占める要素として使われます。そのため、マテリアルに直接キューブマップを割り当てるか、あるいはEnvironmentセクションでシーン全体にスカイボックスとしてキューブマップを設定しない場合、マテリアルはきれいに表示されません。

さらに、キューブマップに[HDR][2] (高ダイナミックレンジ) テクスチャを使うことで、よりマテリアルをきれいに表示することができます。

<div class="alert-info">キューブマップを物理的マテリアルに適用するには、**キューブマップを事前にフィルタリングしなければいけないことに注意してください**。キューブマップの素材を設定したら、その真下にある"prefilter"ボタンを必ず押してください。
</div>

## 金属質(metalness)とスペキュラを使った設定法

![Workflows][4]

物理ベースのレンダリングはアセット作成の方法が大きく分けて二種類あります。二つの方法は等価で、結果は同じものになります。最終的にはどちらの方法が好みかというところで選択することになります。PlayCanvasでは金属質を使った方法を使うことが多いです。というのも、金属質マップはより簡単に作ることができ、さらにシングルチャネルですので、一般的に効率がよりよいためです。

**金属質**を使った方法では、金属質値あるいはマテリアルのどの部分が金属質であるかどうかを決める金属質マップを設定します。通常は非金属であれば0、金属であれば1を設定するという単純な二択です。1と0の間の値を取るケースはそれほど多くありません。

**スペキュラ**を使った方法では、スペキュラ値あるいはマテリアルによって反射された光の強さと色を決めるスペキュラマップを設定します。

[Marmoset Toolbag blog][5]にこの二つの方法の違いがわかりやすく説明されています。

それではマテリアル設定に進んでいきましょう。

# マテリアルのプロパティとマップ

## 拡散(Diffuse)

拡散色はマテリアルの下地の色で、RGB色の値を取ります。なめらかで純粋な物質(金属やプラスチックなど)の場合はひとつの値だけを取ることができますが、拡散マップテクスチャとして与えることもできます。拡散マップを使う場合には、照明の影響(影やハイライトなど)を含めないようにしてください。これらの効果は別のマップで適応することができるためです。

拡散色は**アルベド**や**ベースカラー**と呼ばれることもあります。

<iframe src="http://playcanv.as/p/Q28EwTwQ?color"></iframe>

インターネット上を探すと、拡散色/アルベドの値と素材の対応表をすぐに見つけることができます。

![Metals][3]

<table class="centered">
  <tr>
  <th>素材</th><th>RGB</th>
  </tr>
  <tr>
  <td>金</td><td>(1.000, 0.766, 0.336) or [255, 195, 86]</td>
  </tr>
  <tr>
  <td>銀</td><td>(0.972, 0.960, 0.915) or [248, 245, 233]</td>
  </tr>
  <tr>
  <td>銅</td><td>(0.955, 0.637, 0.538) or [244, 162, 137]</td>
  </tr>
</table>

## 金属質(Metalness)

金属質の値は、**金属質**を使ったマテリアル設定の方法の一部です。金属質は0から1の間の値を取り、そのマテリアルが金属か(1)、あるいは非金属か(0)を決定します。

<div class="alert-info">
金属質の値はほぼいつでも0か1かのいずれかを設定します。この間の値を設定する必要があることはまれです。
</div>

また、金属質マップを使うと、マテリアルの特定の部分を金属に、特定の部分を非金属に設定することができます。

<iframe src="http://playcanv.as/p/Q28EwTwQ?metal"></iframe>

## 光沢度(Glossiness)

光沢度は**金属質*と**スペキュラ**を使う方法の両方で使われ、マテリアルの表面がどのくらいなめらかかを定義します。光沢度はマテリアルの表面で反射する光がぼやけるか鋭いか、あるいはスペキュラハイライトが広いか狭いかに影響します。光沢度は0から100の間の値か、あるいは光沢度マップとして与えることができます。

<iframe src="http://playcanv.as/p/Q28EwTwQ?gloss"></iframe>

いくつかの物理ベースレンダリングシステムでは、光沢度という用語の代わりに**粗さ (Roughness)**という用語を使います。粗さは光沢度の反対の意味です。光沢度と粗さを変換する際には、単純にその値を反転してください。

光沢度と粗さは、**microsurface値**という用語で呼ばれることもあります。

## まとめ

物理的マテリアルの仕組みでは、**拡散**、**金属質**、**光沢度**が重要な役割を果たします。下のデモを使って色々な組み合わせを試してみてください。

マテリアルの見た目をさらに良くするために、アンビエントオクルージョン、発光、透明度、法線マップとハイトマップといった様々なプロパティを使うことができます。

<iframe src="http://playcanv.as/p/Q28EwTwQ"></iframe>

[1]: http://store.playcanvas.com
[2]: /user-manual/glossary#hdr
[3]: /images/user-manual/graphics/physical-rendering/metals.jpg
[4]: /images/user-manual/graphics/physical-rendering/workflows.jpg
[5]: https://www.marmoset.co/toolbag/learn/pbr-conversion

