---
title: 初级的音频
template: tutorial-page.tmpl.html
tags: audio
thumb: https://s3-eu-west-1.amazonaws.com/images.playcanvas.com/projects/12/405821/V89N1G-image-75.jpg
---

<iframe src="https://playcanv.as/p/XqMw92Zl/" ></iframe>

*坦克围绕着机器人在移动。你可以在游戏中通过点击鼠标进行射击。*

## 音乐播放源与听众

在这个教程中我们在场景中心放置了一个机器人，并使它被一个坦克围绕着旋转。从坦克引擎中发出的声音由机器人的耳朵监听。随着机器人围绕坦克移动，我们可以听到的声音的位置从左到背后到右再到前。

PlayCanvas中的基本的音频系统有两个组件类型。

 [声音][1] 组件播放格式如Wave, MP3 或 Ogg Vorbis 的音频资源文件。试想一下，声音组件，就如场景中的扬声器。 在场景中可以有很多播放着不同声源的声音组建。

每个声音组建包含多个声源槽。每个槽都有一个名字并定义了即将播放的声音资源。你可以使一个声音组件上包含多个彼此独立播放声音的插槽。

 [音频接收器][2] 组件决定了一个声音会如何被监听。试想一下，音频监听器组件，如同场景中的麦克风。同一时刻只能有一个活跃的音频接收器。

## 场景设置

你应该看看本教程中编辑器中的 [层级树][3]面板。这些是在场景里的主要实体：

### 玩家角色

我们的机器人。它拥有一个音频接收器，所以所有的声音都会按照这个机器人的位置被监听。

### 围绕者

一个用于使坦克旋转的实体。它拥有一个有能够使实体围绕指定Y轴按照固定速度旋转的脚本的脚本组件。

### 坦克

我们的坦克。它是围绕者实体的一个子物体，因此它会跟随运动。它拥有一个有2个声源槽的音频组件:

"引擎"声源槽主管循环播放坦克的引擎声。它被设置为一进入场景就开始播放。

另一个声源槽就是"射击"槽。这个槽会在我们每次点击屏幕使坦克射击时由脚本控制播放。该槽的重叠选项框设为真，意味着我们能够多次射击，每次射击都会产生一个新的声音而不是使旧声音重新播放。

坦克同样也有一个脚本组件，它处理用户的输入，使炮塔射击，也处理射击的声音播放和特效，比如简单的动画和粒子系统。

## 创建声音资源

创建一个声音资源，选择你想要为之添加音源的实体然后从*实体* 的菜单中选择*新组建* 。从组件列表中选择 *声音* 并点击*添加* 按钮。

声音属性将不会出现在属性编辑器中。

![音频组件][5]

坦克的实体上有一个音频组建。这里是关于它的属性的一些信息:

### 位置相关

如果它被勾选了就意味着这个声音的监听效果将会被它自己和当前的声音接收者 (我们的机器人)在3D空间中的距离所影响。 如果它没有被勾选，那么这个声音将以2D方式被两个扬声器所播放。

### 资源

每一个音源槽都有一个资源选择器，它能够允许你从不同的槽中播放不同的声音资源。查看[导入资源][4]以获得关于如何上传音频资源的详情。

<div class="alert-info">
    并非所有浏览器都支持所有的音频格式。目前，我们建议使用的是大多数浏览器都支持的MP3格式(.MP3)。
</div>

一旦你上传你的资源，使用资源选择器为您的声源槽选择音频资源。

### 自动播放

如果你希望一个声源槽在场景加载后立刻播放，那么勾选它。否则取消勾选，然后使用脚本控制其播放。

### 重叠

如果不勾选它，槽每次被脚本控制播放声音都会从头开始。如果这对你并没有影响比如你正在播放背景音乐或一个不需要重复的声音，那么放着不勾。

然而，如果你想重复播放声音并重放的时候不停止所有的声音，设置此项为true。在本教程中我们的射击声音就是设置为重叠的。

### 循环

默认情况下，音频样板将被播放一次，然后停止。如果你想要的声音不断循环，例如播放背景音乐，那么你可以勾选*循环*框。比如我们的发动机就是一个循环的声音，但射击的声音不是。

## 创建听众

要创建一个声音监听者，选择代表监听器的实体。通常情况下，这会是游戏中的摄像头，因为这是玩家的'头'的位置。在我们的情况下，声音监听者被附着到机器人上。

<div class="alert-info">
你一次只能有一个音频监听器。所创建的最后一个音频监听器组件将成为唯一活动的监听器。
</div>

[1]: /user-manual/packs/components/sound
[2]: /user-manual/packs/components/audiolistener
[3]: https://playcanvas.com/editor/scene/440098
[4]: /user-manual/assets/importing
[5]: /images/tutorials/audio/sound.jpg

